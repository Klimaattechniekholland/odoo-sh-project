<odoo>
    <data>
        <record id="site_visit_server_action_send_email" model="ir.actions.server">
            <field name="name">Auto Email Site Visit Report</field>
            <field name="model_id" ref="model_site_visit"/>
            <field name="state">code</field>
            <field name="code">
                action = env.ref('site_visit.email_template_site_visit').send_mail(record.id, force_send = True)
            </field>
        </record>

<!--        <record id="site_visit_rule_send_email_on_done" model="base.automation">-->
<!--            <field name="name">Send Site Visit Report on Done</field>-->
<!--            <field name="model_id" ref="model_site_visit"/>-->
<!--            <field name="trigger">on_write</field>-->
<!--            <field name="filter_pre_domain">[('state', '=', 'done')]</field>-->
<!--            <field name="state">code</field>-->
<!--            <field name="code">-->
<!--                action = env.ref('site_visit.email_template_site_visit').send_mail(record.id, force_send = True)-->
<!--            </field>-->
<!--        </record>-->
    </data>
</odoo>
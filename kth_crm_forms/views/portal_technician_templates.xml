<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <template id="portal_technician_report" name="Technician Acceptance Report">
        <t t-call="portal.portal_layout">
            <div class="container my-5 p-4" style="max-width:800px; background:#F3F3F3; border-radius:12px;">
                <h2 style="color:#003366; border-bottom:2px solid #F38821; padding-bottom:10px;">
                    Technician Acceptance Report
                </h2>
                <form t-att-action="'/my/technician_report/submit/%s' % lead.id" method="post" enctype="multipart/form-data">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                    <div class="form-group mb-3">
                        <label>Date</label>
                        <input type="date" name="report_date" class="form-control" t-att-value="lead.report_date or ''"/>
                    </div>
                    <div class="form-group mb-3">
                        <label>Technician Fullname</label>
                        <input type="text" name="report_fullname" class="form-control" t-att-value="lead.report_fullname or ''"/>
                    </div>
                    <div class="form-group mb-3">
                        <label>Location Address</label>
                        <input type="text" name="report_address" class="form-control" t-att-value="lead.report_address or ''"/>
                    </div>
                    <div class="form-group mb-3">
                        <label>Component</label>
                        <input type="text" name="component" class="form-control" t-att-value="lead.component or ''"/>
                    </div>
                    <div class="form-group mb-3">
                        <label>Type of Defect</label>
                        <input type="text" name="defect_type" class="form-control" t-att-value="lead.defect_type or ''"/>
                    </div>
                    <div class="form-group mb-3">
                        <label>Code</label>
                        <input type="text" name="defect_code" class="form-control" t-att-value="lead.defect_code or ''"/>
                    </div>
                    <div class="form-group mb-3">
                        <label>Intensity</label>
                        <select name="intensity" class="form-select">
                            <option value="">--</option>
                            <option value="low" t-att-selected="lead.intensity == 'low'">Low</option>
                            <option value="medium" t-att-selected="lead.intensity == 'medium'">Medium</option>
                            <option value="high" t-att-selected="lead.intensity == 'high'">High</option>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <label>Score</label>
                        <input type="number" step="0.1" name="score" class="form-control" t-att-value="lead.score or ''"/>
                    </div>
                    <div class="form-group mb-3">
                        <label>Site Photos</label>
                        <input type="file" name="photos" class="form-control" multiple="multiple"/>
                    </div>

                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-lg" style="background:#2F7CB9; color:#fff;">Submit Report</button>
                    </div>
                </form>
            </div>
        </t>
    </template>

    <template id="portal_technician_success" name="Technician Report Success">
        <t t-call="portal.portal_layout">
            <div class="container my-5 p-5 text-center">
                <h2 style="color:#2F7CB9;">Technician Report Submitted</h2>
                <p>The acceptance report for <t t-esc="lead.name"/> has been saved.</p>
            </div>
        </t>
    </template>
</odoo>
